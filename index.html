<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A bill-splitting calculator that helps couples and housemates divide expenses fairly based on their income.">
    <title>FairShare - Fair Bill Splitting Calculator</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"></noscript>
</head>
<body>

<div class="lazy-loader">
    <div class="spinner"></div>
</div>

<div id="offline-indicator" class="offline-badge" hidden aria-live="polite">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M10.34 10.34a3 3 0 004.318 4.318M7.93 7.93a7 7 0 009.848 9.848M5.12 5.12a11 11 0 0015.657 15.657" /></svg>
    Working Offline
</div>

<a href="#main-content" class="skip-link">Skip to main content</a>

<main id="main-content">
    <div class="app-container">
        <header class="header-brand" id="header-brand">
            <img src="logo.svg" alt="FairShare - Salary Proportion Calculator" width="280" height="70">
            <button id="start-over-button" onclick="clearCacheAndReload()" aria-label="Start over and clear all data">
                Start Over
            </button>
        </header>

        <section class="screen" id="screen-1" aria-labelledby="heading-landing" tabindex="-1">
            <h2 id="heading-landing">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                Welcome to FairShare
            </h2>

            <div class="landing-intro" id="landing-intro">
                <p>
                    <strong>Build a fair financial foundation for your home.</strong><br>
                    Establish proportionate bill splitting based on your relative incomes in just 7 steps.
                </p>
                <div class="alert-info" id="efficiency-tip">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /></svg>
                    <p style="margin-bottom: 0;"><strong>Efficiency Tip:</strong> Use your <strong>Arrow Keys</strong> or <strong>Enter</strong> to navigate quickly between screens.</p>
                </div>
                <p class="screen-summary">
                    This guide automates your household budgeting. By establishing a contribution ratio, you'll ensure both partners retain a fair share of disposable income, removing financial friction before it starts.
                </p>
            </div>

            <div class="how-it-works" id="how-it-works">
                <h3>Rapid Overview:</h3>
                <ol>
                    <li>Set your income-based contribution ratio.</li>
                    <li>Estimate property value and regional running costs.</li>
                    <li>Review your detailed proportionate split report.</li>
                </ol>
            </div>
        </section>

        <section class="screen" id="screen-2" aria-labelledby="heading-income" tabindex="-1" hidden>
            <h2 id="heading-income">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3" /></svg>
                Your Income
            </h2>

            <p>Establish your base contribution ratio.</p>
            <p class="screen-summary">
                Provide your annual pre-tax salaries to calculate your unique contribution percentage. This ensures all shared bills are split proportionately to each partner's individual earning power.
            </p>

            <div class="form-group">
                <label class="form-label" for="salaryP1">Your Annual Salary (Pre-tax)</label>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="salaryP1" class="input-control" required aria-required="true" placeholder="e.g. 35000" aria-describedby="salaryP1-help salaryP1-error" data-cy="salaryP1-input">
                </div>
                <div id="salaryP1-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid annual salary.</span>
                </div>
                <div id="salaryP1-help" class="help-text">Your combined income determines your individual percentage of the household bills.</div>
            </div>

            <div class="form-group">
                <label class="form-label" for="salaryP2">Your Partner's Annual Salary (Pre-tax)</label>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="salaryP2" class="input-control" required aria-required="true" placeholder="e.g. 45000" aria-describedby="salaryP2-help salaryP2-error" data-cy="salaryP2-input">
                </div>
                <div id="salaryP2-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid annual salary for your partner.</span>
                </div>
                <div id="salaryP2-help" class="help-text">Your combined income determines your individual percentage of the household bills.</div>
            </div>
        </section>

        <section class="screen" id="screen-3" aria-labelledby="heading-property" tabindex="-1" hidden>
            <h2 id="heading-property">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008z" /></svg>
                Property Details
            </h2>

            <p>Define your home to automate cost estimates.</p>
            <p class="screen-summary">
                Enter your postcode and property size. We use regional data to automate accurate estimates for Council Tax and local utility rates based on your specific location.
            </p>

            <div class="form-group">
                <label class="form-label" for="postcode">Property Postcode</label>
                <div class="input-group">
                    <input type="text" id="postcode" class="input-control" aria-describedby="postcode-help postcode-error" onblur="checkRegion()" placeholder="e.g. SW1A 0AA" data-cy="postcode-input">
                </div>
                <div id="postcode-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid UK postcode.</span>
                </div>
                <div id="postcode-help" class="help-text">Used to estimate local market prices and regional utility variations.</div>
                <div id="region-announcement" aria-live="polite" class="info-text"></div>
            </div>

            <div class="form-group">
                <label class="form-label" for="propertyPrice">Current Market Value (£)</label>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="propertyPrice" class="input-control" placeholder="e.g. 250000" aria-describedby="propertyPrice-error" data-cy="propertyPrice-input">
                    <button type="button" id="estimatePriceBtn" class="btn-addon" data-cy="estimatePrice-button">Estimate</button>
                </div>
                <div id="propertyPrice-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a property value or use a postcode to estimate.</span>
                </div>
                <div id="propertyPrice-estimate-display" aria-live="polite" class="help-text" hidden>
                    Using estimated market price: <span id="estimatedPriceValue" class="fw-bold"></span>
                </div>
            </div>

            <fieldset class="form-group" data-cy="taxBand-fieldset">
                <legend class="form-label">Select Valuation Band</legend>
                <p class="help-text">Council Tax is determined by the property's assigned valuation band.</p>
                <a href="https://www.gov.uk/council-tax-bands" target="_blank" rel="nofollow" class="link-external">
                    Find your Council Tax Band
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" /></svg>
                </a>
                <div class="segmented-control">
                    <input type="radio" name="taxBand" id="bA" value="A" onchange="updatePricePreview('A')"><label for="bA">A</label>
                    <input type="radio" name="taxBand" id="bB" value="B" onchange="updatePricePreview('B')"><label for="bB">B</label>
                    <input type="radio" name="taxBand" id="bC" value="C" onchange="updatePricePreview('C')"><label for="bC">C</label>
                    <input type="radio" name="taxBand" id="bD" value="D" onchange="updatePricePreview('D')"><label for="bD">D</label>
                    <input type="radio" name="taxBand" id="bE" value="E" onchange="updatePricePreview('E')"><label for="bE">E</label>
                    <input type="radio" name="taxBand" id="bF" value="F" onchange="updatePricePreview('F')"><label for="bF">F</label>
                    <input type="radio" name="taxBand" id="bG" value="G" onchange="updatePricePreview('G')"><label for="bG">G</label>
                    <input type="radio" name="taxBand" id="bH" value="H" onchange="updatePricePreview('H')"><label for="bH">H</label>
                </div>
                <div id="taxBand-error" class="error-text" aria-live="assertive" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please select a valuation band to continue.</span>
                </div>
            </fieldset>

            <div class="alert-info" id="band-price-display" aria-live="polite">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /></svg>
                <span>Select a band to see estimated cost</span>
            </div>

            <div class="form-row">
                <div class="form-group col">
                    <label class="form-label" for="bedrooms">Bedrooms</label>
                    <div class="input-group">
                        <input type="number" id="bedrooms" class="input-control" value="2" min="1" max="50" required aria-describedby="bedrooms-error" data-cy="bedrooms-input">
                    </div>
                    <div id="bedrooms-error" class="error-text" hidden>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                        <span>Required.</span>
                    </div>
                </div>
                <div class="form-group col">
                    <label class="form-label" for="bathrooms">Bathrooms</label>
                    <div class="input-group">
                        <input type="number" id="bathrooms" class="input-control" value="1" min="1" max="50" required aria-describedby="bathrooms-error" data-cy="bathrooms-input">
                    </div>
                    <div id="bathrooms-error" class="error-text" hidden>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                        <span>Required.</span>
                    </div>
                </div>
            </div>

            <div class="alert-warning" id="warning-screen-3" role="alert" aria-live="polite" hidden></div>
        </section>

        <section class="screen" id="screen-4" aria-labelledby="heading-mortgage" tabindex="-1" hidden>
            <h2 id="heading-mortgage">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z" /></svg>
                Mortgage & Equity
            </h2>

            <p>Finalize home ownership and financing details.</p>
            <p class="screen-summary">
                Set your deposit and interest rates. We calculate monthly repayments and individual equity shares to ensure your largest joint commitment is split fairly and transparently.
            </p>

            <!-- 1. Context: Loan & Deposit -->
            <div class="form-group">
                <label class="form-label" for="depositPercentage">Total Deposit Percentage (%)</label>
                <div class="input-group">
                    <input type="number" id="depositPercentage" class="input-control" value="10" min="0" max="100" required aria-describedby="depositPercentage-help depositPercentage-error" data-cy="depositPercentage-input">
                    <span class="input-addon">%</span>
                </div>
                <div id="depositPercentage-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a deposit percentage (0-100).</span>
                </div>
                <div id="depositPercentage-help" class="help-text">The total cash deposit you are both putting down combined.</div>
            </div>

            <fieldset class="form-group">
                <legend class="form-label">Split Deposit Proportionally?</legend>
                <div class="switch-toggle">
                    <input type="radio" name="depositSplitType" id="splitPropYes" value="yes" checked>
                    <label for="splitPropYes">Income Ratio</label>
                    <input type="radio" name="depositSplitType" id="splitPropNo" value="no">
                    <label for="splitPropNo">Equal (50/50)</label>
                    <span class="switch-slider" aria-hidden="true"></span>
                </div>
                <div id="deposit-split-help" class="help-text">Choose whether the initial cash deposit should match your salary ratio or be equal.</div>
            </fieldset>

            <div class="form-row">
                <div class="form-group col">
                    <label class="form-label" for="mortgageInterestRate">Interest Rate (APR %)</label>
                    <div class="input-group">
                        <input type="number" id="mortgageInterestRate" class="input-control" value="5" min="0" step="0.1" required aria-describedby="mortgageInterestRate-error" data-cy="mortgageInterestRate-input">
                        <span class="input-addon">%</span>
                    </div>
                    <div id="mortgageInterestRate-error" class="error-text" hidden>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                        <span>Invalid.</span>
                    </div>
                </div>

                <div class="form-group col">
                    <label class="form-label" for="mortgageTerm">Term (Years)</label>
                    <div class="input-group">
                        <input type="number" id="mortgageTerm" class="input-control" value="25" min="1" max="50" required aria-describedby="mortgageTerm-help mortgageTerm-error" data-cy="mortgageTerm-input">
                    </div>
                    <div id="mortgageTerm-error" class="error-text" hidden>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                        <span>Invalid.</span>
                    </div>
                </div>
            </div>
            <div id="mortgageTerm-help" class="help-text" style="margin-top: -1rem; margin-bottom: 1.5rem;">The duration of your mortgage repayment plan.</div>

            <!-- 2. Context: Purchase Costs -->
            <fieldset class="form-group">
                <legend class="form-label">Purchase Type</legend>
                <div class="switch-toggle">
                    <input type="radio" name="homeType" id="homeFirst" value="first" checked>
                    <label for="homeFirst">Sole Property</label>
                    <input type="radio" name="homeType" id="homeSecond" value="second">
                    <label for="homeSecond">Additional Property</label>
                    <span class="switch-slider" aria-hidden="true"></span>
                </div>
                <div id="home-type-help" class="help-text">Determines the Stamp Duty (SDLT) rate applied to this purchase.</div>
            </fieldset>

            <fieldset class="form-group" id="ftb-container">
                <legend class="form-label">Buyer Status</legend>
                <div class="switch-toggle">
                    <input type="radio" name="buyerStatus" id="buyerStandard" value="standard" checked>
                    <label for="buyerStandard">Standard</label>
                    <input type="radio" name="buyerStatus" id="buyerFTB" value="ftb">
                    <label for="buyerFTB">First Time Buyer</label>
                    <span class="switch-slider" aria-hidden="true"></span>
                </div>
                <div id="buyer-status-help" class="help-text">Eligible for First Time Buyer relief in applicable regions.</div>
            </fieldset>

            <div class="purchase-costs-box" aria-live="polite" style="margin-bottom: 2rem; padding: 1.5rem; background: rgba(44, 62, 99, 0.03); border-radius: 0.75rem; border: 1px dashed var(--color-border);">
                <h4 style="margin-top: 0;">Estimated Purchase Costs</h4>
                <div class="form-group">
                    <label class="form-label">Estimated Stamp Duty (SDLT)</label>
                    <div class="input-group">
                        <span class="input-addon">£</span>
                        <input type="text" id="sdlt-estimate" class="input-control" readonly>
                    </div>
                    <p class="help-text">Standard residential rate estimate.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Estimated Legal Fees</label>
                    <div class="input-group">
                        <span class="input-addon">£</span>
                        <input type="text" id="legal-fees-estimate" class="input-control" readonly>
                    </div>
                    <p class="help-text">Includes conveyancing, searches, and bank transfer fees.</p>
                </div>
            </div>

            <!-- 3. Context: Summary -->
            <div class="form-group">
                <label class="form-label" for="displayPropertyPrice">Current Market Value</label>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="text" id="displayPropertyPrice" class="input-control" readonly aria-describedby="displayPropertyPrice-help">
                </div>
                <div id="displayPropertyPrice-help" class="help-text">As specified in the property details section.</div>
            </div>

            <div class="alert-info" id="equity-mortgage-summary" aria-live="polite">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /></svg>
                <div>
                    Total Equity Required: <span id="totalEquityDisplay" class="fw-bold">£0</span><br>
                    Mortgage Required: <span id="mortgageRequiredDisplay" class="fw-bold">£0</span><br>
                    Est. Monthly Mortgage: <span id="monthlyMortgageDisplay" class="fw-bold">£0</span><br>
                    Total Repayment (inc. Interest): <span id="totalRepaymentDisplay" class="fw-bold">£0</span>
                </div>
            </div>

            <div class="summary-cards" id="deposit-share-summary">
                <div class="summary-card share-p1">
                    <p class="summary-card-label">Your Deposit Share</p>
                    <p id="equityP1Display" class="summary-card-value" aria-live="polite">£0</p>
                </div>
                <div class="summary-card share-p2">
                    <p class="summary-card-label">Partner's Deposit Share</p>
                    <p id="equityP2Display" class="summary-card-value" aria-live="polite">£0</p>
                </div>
            </div>
        </section>

        <section class="screen" id="screen-5" aria-labelledby="heading-utilities" tabindex="-1" hidden>
            <h2 id="heading-utilities">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>
                Monthly Utilities
            </h2>

            <p>Review baseline household costs.</p>
            <p class="screen-summary">
                We've provided regional estimates for your essential utilities. Adjust these figures to match your actual monthly commitments for more precise results.
            </p>

            <div class="master-toggle">
                <div class="master-toggle-inner">
                    <span class="master-toggle-label">Set All Rules:</span>
                    <div class="switch-toggle" style="margin-bottom: 0; max-width: 18rem;">
                        <input type="radio" name="masterUtilities" id="muRatio" value="yes" onchange="setAllSplitTypes('utilities', 'yes')">
                        <label for="muRatio">Ratio</label>
                        <input type="radio" name="masterUtilities" id="muEqual" value="no" onchange="setAllSplitTypes('utilities', 'no')">
                        <label for="muEqual">50/50</label>
                        <span class="switch-slider"></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="councilTaxCost">Monthly Council Tax (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="councilTaxSplitType" id="ctPropYes" value="yes" checked>
                        <label for="ctPropYes">Ratio</label>
                        <input type="radio" name="councilTaxSplitType" id="ctPropNo" value="no">
                        <label for="ctPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="councilTaxCost" class="input-control" required aria-describedby="councilTaxCost-help councilTaxCost-error" data-cy="councilTaxCost-input">
                </div>
                <div id="councilTaxCost-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter the monthly council tax.</span>
                </div>
                <div id="councilTaxCost-help" class="help-text">Estimated based on your selected valuation band.</div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="energyCost">Monthly Energy Estimate (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="energySplitType" id="enPropYes" value="yes" checked>
                        <label for="enPropYes">Ratio</label>
                        <input type="radio" name="energySplitType" id="enPropNo" value="no">
                        <label for="enPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="energyCost" class="input-control" required aria-describedby="energy-explainer energyCost-error" data-cy="energyCost-input">
                </div>
                <div id="energyCost-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter an energy estimate.</span>
                </div>
                <div id="energy-explainer" class="help-text">Estimated gas and electricity usage for this property size and region.</div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="waterBill">Monthly Water Bill (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="waterSplitType" id="wtPropYes" value="yes" checked>
                        <label for="wtPropYes">Ratio</label>
                        <input type="radio" name="waterSplitType" id="wtPropNo" value="no">
                        <label for="wtPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="waterBill" class="input-control" value="30" required aria-describedby="waterBill-help waterBill-error" data-cy="waterBill-input">
                </div>
                <div id="waterBill-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a water bill amount.</span>
                </div>
                <div id="waterBill-help" class="help-text">Estimated regional average based on bathrooms and postcode.</div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="broadbandCost">Monthly Broadband & TV (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="broadbandSplitType" id="bbPropYes" value="yes" checked>
                        <label for="bbPropYes">Ratio</label>
                        <input type="radio" name="broadbandSplitType" id="bbPropNo" value="no">
                        <label for="bbPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="broadbandCost" class="input-control" placeholder="e.g. 30" aria-describedby="broadband-help broadband-error" data-cy="broadbandCost-input">
                </div>
                <div id="broadband-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid amount.</span>
                </div>
                <div id="broadband-help" class="help-text">Internet, cable, and streaming subscriptions.</div>
            </div>
        </section>

        <section class="screen" id="screen-6" aria-labelledby="heading-committed" tabindex="-1" hidden>
            <h2 id="heading-committed">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m.75 3.375H5.625c-.621 0-1.125-.504-1.125-1.125V4.125c0-.621.504-1.125 1.125-1.125h12.75c.621 0 1.125.504 1.125 1.125v12.75c0 .621-.504 1.125-1.125 1.125H15m-3 0v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21" /></svg>
                Committed Spending
            </h2>
            <p>Add optional shared monthly expenses.</p>
            <p class="screen-summary">
                Defining shared lifestyle costs like food and childcare now ensures full transparency in your joint budget, preventing friction over variable expenses later.
            </p>

            <div class="master-toggle">
                <div class="master-toggle-inner">
                    <span class="master-toggle-label">Set All Rules:</span>
                    <div class="switch-toggle" style="margin-bottom: 0; max-width: 18rem;">
                        <input type="radio" name="masterCommitted" id="mcRatio" value="yes" onchange="setAllSplitTypes('committed', 'yes')">
                        <label for="mcRatio">Ratio</label>
                        <input type="radio" name="masterCommitted" id="mcEqual" value="no" onchange="setAllSplitTypes('committed', 'no')">
                        <label for="mcEqual">50/50</label>
                        <span class="switch-slider"></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="groceriesCost">Monthly Groceries (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="groceriesSplitType" id="grPropYes" value="yes" checked>
                        <label for="grPropYes">Ratio</label>
                        <input type="radio" name="groceriesSplitType" id="grPropNo" value="no">
                        <label for="grPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="groceriesCost" class="input-control" placeholder="e.g. 400" aria-describedby="groceries-help groceries-error" data-cy="groceriesCost-input">
                </div>
                <div id="groceries-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid amount.</span>
                </div>
                <div id="groceries-help" class="help-text">Food, household supplies, and shared toiletries.</div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="childcareCost">Monthly Childcare (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="childcareSplitType" id="ccPropYes" value="yes" checked>
                        <label for="ccPropYes">Ratio</label>
                        <input type="radio" name="childcareSplitType" id="ccPropNo" value="no">
                        <label for="ccPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="childcareCost" class="input-control" placeholder="e.g. 200" aria-describedby="childcare-help childcare-error" data-cy="childcareCost-input">
                </div>
                <div id="childcare-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid amount.</span>
                </div>
                <div id="childcare-help" class="help-text">Nursery, childminders, or other care costs.</div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="insuranceCost">Shared Insurances (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="insuranceSplitType" id="isPropYes" value="yes" checked>
                        <label for="isPropYes">Ratio</label>
                        <input type="radio" name="insuranceSplitType" id="isPropNo" value="no">
                        <label for="isPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="insuranceCost" class="input-control" placeholder="e.g. 50" aria-describedby="insurance-help insurance-error" data-cy="insuranceCost-input">
                </div>
                <div id="insurance-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid amount.</span>
                </div>
                <div id="insurance-help" class="help-text">Combined life, health, or pet insurance.</div>
            </div>

            <div class="form-group">
                <div class="field-header">
                    <label class="form-label" for="otherSharedCosts">Other Shared Monthly Costs (£)</label>
                    <div class="mini-switch">
                        <input type="radio" name="otherSharedSplitType" id="osPropYes" value="yes" checked>
                        <label for="osPropYes">Ratio</label>
                        <input type="radio" name="otherSharedSplitType" id="osPropNo" value="no">
                        <label for="osPropNo">50/50</label>
                        <span class="mini-switch-slider"></span>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-addon">£</span>
                    <input type="number" id="otherSharedCosts" class="input-control" placeholder="e.g. 100" aria-describedby="other-help other-error" data-cy="otherSharedCosts-input">
                </div>
                <div id="other-error" class="error-text" hidden>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>Please enter a valid amount.</span>
                </div>
                <div id="other-help" class="help-text">Gym memberships, streaming services, or car payments.</div>
            </div>
        </section>

        <section class="screen" id="screen-7" aria-labelledby="heading-results" tabindex="-1" hidden>
            <h2 id="heading-results">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" /><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" /></svg>
                Detailed Analysis
            </h2>

            <p>Review your proportionate household budget below.</p>
            <p class="screen-summary">
                This detailed analysis provides a comprehensive roadmap for your joint contributions. By applying your specific split rules to each line item, we've created a balanced financial plan that respects your individual earning power. Use this breakdown to set up joint account standing orders with absolute confidence.
            </p>

            <div class="result-ratio-bar" id="result-ratio-bar">
                <p class="text-center fw-bold">Your Fair Share Split</p>
                <div class="ratio-bar-display" id="ratio-bar-display" role="img" aria-label="Salary Ratio Chart: 50 percent You and 50 percent Your Partner">
                    <div class="bar-p1" id="bar-p1" aria-hidden="true" data-cy="ratio-bar-p1">50%</div>
                    <div class="bar-p2" id="bar-p2" aria-hidden="true" data-cy="ratio-bar-p2">50%</div>
                </div>
                <p class="sr-only" id="ratio-text-desc">Ratio is 50 percent You and 50 percent Your Partner.</p>
            </div>

            <h3 class="text-center">Your Monthly Shares</h3>
            <div class="monthly-shares-summary" id="monthly-shares-summary">
                <div class="result-card result-share-p1" id="result-share-p1">
                    <p class="result-card-label">You Pay</p>
                    <p class="result-card-value result-p1" id="result-p1" aria-live="polite" data-cy="result-p1">£0</p>
                </div>
                <div class="result-card result-share-p2" id="result-share-p2">
                    <p class="result-card-label">Your Partner Pays</p>
                    <p class="result-card-value result-p2" id="result-p2" aria-live="polite" data-cy="result-p2">£0</p>
                </div>
            </div>
            <p class="text-center total-bill-row" id="total-bill-row">
                Total Monthly Bill: <span class="fw-bold total-bill-display" id="total-bill-display" aria-live="polite" data-cy="total-bill-display">£0</span>
            </p>
            <p class="text-center info-text result-summary" id="result-summary" aria-live="polite"></p>

            <div class="workings-container">
                <h4>Calculation Workings</h4>
                <div class="calculation-workings" id="calculation-workings">
                    <div class="workings-sections">
                        <div class="workings-section">
                            <h5>1. Combined Annual Income & Ratio</h5>
                            <p><span id="wk-salary-p1">£0</span> + <span id="wk-salary-p2">£0</span> = <strong id="wk-total-salary">£0</strong></p>
                            <ul>
                                <li>You: <strong id="wk-p1-perc">0%</strong> share</li>
                                <li>Your Partner: <strong id="wk-p2-perc">0%</strong> share</li>
                            </ul>
                        </div>

                        <div class="workings-section">
                            <h5>2. Mortgage & Equity Summary</h5>
                            <p>Property Value: <strong id="wk-property-price">£0</strong></p>
                            <ul>
                                <li>Deposit: <strong id="wk-deposit-perc">0%</strong> (<span id="wk-total-equity">£0</span>) split by <strong id="wk-deposit-split-type">Income Ratio</strong></li>
                                <li>Mortgage Required: <strong id="wk-mortgage-required">£0</strong></li>
                                <li>Terms: <strong id="wk-interest-rate">0%</strong> over <strong id="wk-mortgage-term">0</strong> years</li>
                                <li>Monthly Payment: <strong id="wk-monthly-payment">£0</strong></li>
                                <li>Total Repayment: <strong id="wk-total-repayment">£0</strong> (interest inclusive)</li>
                            </ul>
                        </div>

                        <div class="workings-section">
                            <h5>3. Calculation Application</h5>
                            <p>Each monthly line item was split using either your <strong>Income Ratio</strong> or <strong>50/50</strong> based on your specific rule choices throughout the form. The mortgage payment is always split by your Income Ratio to ensure long-term fairness.</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Full Cost Breakdown</h3>
            <div class="table-scroll-container" id="table-scroll-container">
                <table class="data-table" id="results-table">
                    <thead>
                        <tr>
                            <th scope="col">Expense</th>
                            <th scope="col">Total</th>
                            <th scope="col">You</th>
                            <th scope="col">Your Partner</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">Mortgage</th>
                            <td id="bd-mortgage-total" aria-live="polite">£0</td>
                            <td id="bd-mortgage-p1" aria-live="polite">£0</td>
                            <td id="bd-mortgage-p2" aria-live="polite">£0</td>
                        </tr>
                        <tr>
                            <th scope="row">Council Tax</th>
                            <td id="bd-tax-total" aria-live="polite">£0</td>
                            <td id="bd-tax-p1" aria-live="polite">£0</td>
                            <td id="bd-tax-p2" aria-live="polite">£0</td>
                        </tr>
                        <tr>
                            <th scope="row">Energy</th>
                            <td id="bd-energy-total" aria-live="polite">£0</td>
                            <td id="bd-energy-p1" aria-live="polite">£0</td>
                            <td id="bd-energy-p2" aria-live="polite">£0</td>
                        </tr>
                        <tr>
                            <th scope="row">Water</th>
                            <td id="bd-water-total" aria-live="polite">£0</td>
                            <td id="bd-water-p1" aria-live="polite">£0</td>
                            <td id="bd-water-p2" aria-live="polite">£0</td>
                        </tr>
                        <tr>
                            <th scope="row">Broadband & TV</th>
                            <td id="bd-broadband-total" aria-live="polite">£0</td>
                            <td id="bd-broadband-p1" aria-live="polite">£0</td>
                            <td id="bd-broadband-p2" aria-live="polite">£0</td>
                        </tr>
                        <tr>
                            <th scope="row">Groceries</th>
                            <td id="bd-groceries-total" aria-live="polite">£0</td>
                            <td id="bd-groceries-p1" aria-live="polite">£0</td>
                            <td id="bd-groceries-p2" aria-live="polite">£0</td>
                        </tr>
                        <tr>
                            <th scope="row">Committed Spending</th>
                            <td id="bd-committed-total" aria-live="polite">£0</td>
                            <td id="bd-committed-p1" aria-live="polite">£0</td>
                            <td id="bd-committed-p2" aria-live="polite">£0</td>
                        </tr>
                        <tr class="table-total-row" id="table-total-row">
                            <th scope="row">Total</th>
                            <td id="bd-total-total" aria-live="polite">£0</td>
                            <td id="bd-total-p1" aria-live="polite">£0</td>
                            <td id="bd-total-p2" aria-live="polite">£0</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p class="help-text breakdown-summary" id="breakdown-summary" style="margin-top: 1rem; border-top: 1px solid var(--color-border); padding-top: 1rem;"></p>

            <div class="nav-group-vertical">
                <button type="button" id="downloadCSVBtn" class="btn-success btn-block" onclick="downloadCSV()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 1.25rem; height: 1.25rem; vertical-align: middle; margin-right: 0.5rem;"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>
                    Download results as CSV
                </button>
            </div>
        </section>

        <div class="nav-group">
            <button id="back-button" class="btn-secondary" data-cy="back-button">Back</button>
            <button id="next-button" class="btn-primary" data-cy="next-button">Next</button>
        </div>
    </div>
</main>

<footer>
    Vibe coded by Ash Davies (DrizzlyOwl) and Gemini | <a href="README.md" target="_blank" style="color: inherit; text-decoration: underline;">Project Info</a>
</footer>

<div class="progress-container" id="progress-container">
    <div class="progress-track" id="progress-track">
        <span class="progress-text-alt" id="progress-text-alt" aria-live="polite">Step 1 of 7: Welcome</span>
        <div class="app-progress" id="app-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Application Progress" aria-valuetext="Step 1 of 7: Welcome"></div>
    </div>
</div>

<link rel="stylesheet" href="style.css?v=1771261001">
<script src="app.js?v=1771261001"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const efficiencyTip = document.getElementById('efficiency-tip');
        if (efficiencyTip) {
            const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
            if (isTouchDevice) {
                efficiencyTip.style.display = 'none'; // Hide if touch is supported
            } else {
                efficiencyTip.style.display = 'flex'; // Ensure it's visible for non-touch
            }
        }
    });
</script>

<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./service-worker.js')
                .then(reg => console.log('Service Worker: Registered (Scope: ' + reg.scope + ')'))
                .catch(err => console.log('Service Worker: Registration Failed', err));
        });
    }
</script>

</body>
</html>
